<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="search.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    </head>
    <body>
        <div id="search">
            <label for="query">Search:</label>
            <textarea type="text" id="query" name="query" placeholder="Enter a list of all your computer science interests separated by commas."></textarea>
            <button onclick="getTrackedElectives(document.getElementById('query').value)">Submit</button>
        </div>
        <div id="main">
            <h1>CSCE Tracked Elective Recommendation Tool</h1>
            <div id="tracks">
                <div class="track">
                    <p>Track 1</p>
                    <div id="Algorithms and Theory"></div>
                </div>
                <div class="track">
                    <p>Track 2</p>
                    <div id="Systems"></div>
                </div>
                <div class="track">
                    <p>Track 3</p>
                    <div id="Software">
                    </div>
                </div>
                <div class="track">
                    <p>Track 4</p>
                    <div id="Information and Intelligent Systems"></div>
                </div>
                <div class="track">
                    <p>Untracked</p>
                    <div id="Untracked"></div>
                </div>
            </div>
        </div>
    </body>
    <script>
        function getTrackedElectives(q) {
            $.ajax({
                url: 'http://127.0.0.1:5000/tracked',  // Ensure the correct URL
                type: 'GET',
                data: { query: q },
                success: function(response) {
                    console.log(response.type);  // Debugging line
                
                    for (const [track, electives] of Object.entries(response)) {
                        console.log(track)
                        const element = document.getElementById(track);
                        for (const elective of electives) {
                            console.log(elective)
                            const para = document.createElement("p");
                            const node = document.createTextNode(elective);
                            para.appendChild(node);
                            element.appendChild(para);
                        }
                    }
                },
                error: function(error) {
                    console.error('Error:', error);
                    document.getElementById("track1").innerText = "No tracks retrieved";
                }
            });
        }
    </script>
</html>